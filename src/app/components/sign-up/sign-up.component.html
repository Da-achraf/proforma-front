<div
  class="responsive-background flex min-h-screen items-center justify-center bg-gray-100 p-4"
>
  <div class="w-full max-w-4xl rounded-lg bg-white bg-opacity-80 p-8 shadow-lg">
    <h2 class="mb-8 text-center text-2xl font-bold">Create an Account</h2>
    <form [formGroup]="SignUpForm" (ngSubmit)="onSubmit()" class="space-y-6">
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
        <!-- TE ID -->
        <mat-form-field appearance="fill">
          <mat-label>TE ID</mat-label>
          <input
            matInput
            formControlName="teId"
            placeholder="TExxxxxx"
            required
          />
          <mat-error *ngIf="teId.hasError('required') && teId.touched">
            TE ID is required
          </mat-error>
          <mat-error *ngIf="teId.hasError('pattern') && teId.dirty">
            Not a valid TE ID
          </mat-error>
        </mat-form-field>

        <!-- Full Name -->
        <mat-form-field appearance="fill">
          <mat-label>Full Name</mat-label>
          <input matInput formControlName="username" required />
          <mat-error *ngIf="username.hasError('required') && username.touched">
            Full name is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
        <!-- Email -->
        <mat-form-field appearance="fill">
          <mat-label>Email</mat-label>
          <input
            matInput
            type="email"
            formControlName="email"
            placeholder="email@te.com"
            required
          />
          <mat-error *ngIf="email.hasError('required') && email.touched">
            Email is required
          </mat-error>
          <mat-error *ngIf="email.hasError('email') && email.touched">
            Invalid email format
          </mat-error>
        </mat-form-field>

        <!-- Plants -->
        <mat-form-field appearance="fill">
          <mat-label>Plant(s)</mat-label>
          <mat-select formControlName="shipId" multiple required>
            <mat-option *ngFor="let plant of shipPoints" [value]="plant.value">
              {{ plant.label }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="shipId.hasError('required') && shipId.touched">
            Plant is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
        <!-- Backup Email -->
        <mat-form-field appearance="fill">
          <mat-label>Backup Email</mat-label>
          <input
            matInput
            type="email"
            formControlName="backup"
            placeholder="email@te.com"
            required
          />
          <mat-error *ngIf="backup.hasError('required') && backup.touched">
            Backup email is required
          </mat-error>
          <mat-error *ngIf="backup.hasError('email') && backup.touched">
            Invalid email format
          </mat-error>
        </mat-form-field>

        <!-- Department -->
        <mat-form-field appearance="fill">
          <mat-label>Department</mat-label>
          <mat-select formControlName="departementId" required>
            <mat-option *ngFor="let dept of departements" [value]="dept.value">
              {{ dept.label }}
            </mat-option>
          </mat-select>
          <mat-error
            *ngIf="departementId.hasError('required') && departementId.touched"
          >
            Department is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="grid grid-cols-1 gap-6 md:grid-cols-2">
        <!-- Password -->
        <mat-form-field appearance="fill">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="hidePassword ? 'password' : 'text'"
            formControlName="password"
            required
          />
          <button
            mat-icon-button
            matSuffix
            (click)="hidePassword = !hidePassword"
          >
            <i
              class="fa"
              [ngClass]="hidePassword ? 'fa-eye-slash' : 'fa-eye'"
            ></i>
          </button>
          <mat-error *ngIf="password.hasError('required') && password.touched">
            Password is required
          </mat-error>
          <mat-error *ngIf="password.hasError('minlength') && password.touched">
            Password should be at least 6 characters
          </mat-error>
        </mat-form-field>

        <!-- Role -->
        <mat-form-field appearance="fill">
          <mat-label>Role</mat-label>
          <mat-select formControlName="role" required>
            <mat-option *ngFor="let role of roles" [value]="role">
              {{ role | userRoleForDisplay }}
            </mat-option>
          </mat-select>
          <mat-error *ngIf="role.hasError('required') && role.touched">
            Role is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="mt-8 flex w-full justify-center">
        <button
          type="submit"
          [disabled]="!SignUpForm.valid"
          class="w-full rounded-md bg-orange-500 px-6 py-2 text-white hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
        >
          SignUp
        </button>
      </div>

      <p class="mt-6 text-center text-gray-600">
        Already have an account?
        <a routerLink="/login" class="text-orange-500 hover:underline"
          >Login here</a
        >
      </p>
    </form>
  </div>
</div>
